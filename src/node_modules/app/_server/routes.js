import {getAllBlocks, getBlock, getBlockData} from "app/report/_server/handlers/block"
import clientRoutes from "app/_client/routes"
import {addClientRoutes} from "app/utils/route"

const routes = [
  {
    path: "/favicon.ico",
    handler: {file: "public/favicon.ico"},
    config: {cache: {expiresIn: 86400000, privacy: "public"}}
  },
  {
    path: "/public/{path*}",
    handler: {directory: {path: "public"}}
  },
  {
    path: "/api/block",
    handler: getAllBlocks
  },
  {
    path: "/api/block/{id}",
    handler: getBlock
  },
  {
    path: "/api/block/{id}/data",
    handler: getBlockData
  }
]

addClientRoutes(routes, clientRoutes)

routes.forEach(route => {
  route.method = route.method || "GET"
})

export default routes
