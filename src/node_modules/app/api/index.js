import {getReport, getReportViewData} from "app/api/handlers/report"
import {getGeosBySource} from "app/api/handlers/geo"
import {handlePromise} from "app/core/utils/handler"

export function register(server, config, next) {
  server.route([
    {
      method: "GET",
      path: "/geo/source/{source}",
      handler: handlePromise(getGeosBySource)
    },
    {
      method: "GET",
      path: "/report/{id}",
      handler: handlePromise(getReport)
    },
    {
      method: "GET",
      path: "/report/{id}/view/{viewId}/data",
      handler: handlePromise(getReportViewData)
    }
  ])
  next()
}

register.attributes = {
  name: "agridash-api"
}
