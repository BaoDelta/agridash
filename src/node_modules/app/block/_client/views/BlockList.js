import React from "react"
import {get} from "app/_shared/utils/ajax"
import Link from "app/_client/views/Link"

const {Component, PropTypes} = React

class BlockList extends Component {

  static propTypes = {
    children: PropTypes.node
  }

  componentDidMount() {
    get("/api/block").then(blocks => this.setState({
      blocks
    }))
  }

  state = {}

  render() {
    const {children} = this.props
    if (children) {
      return children
    }
    const {blocks} = this.state
    return <div>
      <ul className="m-a">
        {blocks && blocks.map(block => <li key={block.id}>
          <Link to={"/block/" + block.id}>{block.title}</Link>
        </li>)}
      </ul>
    </div>
  }

}

export default BlockList
