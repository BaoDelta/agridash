import React from "react"
import {forEach} from "app/_shared/utils"

const WidgetById = {}

export function register(widgets) {
  forEach(widgets, (Widget, id) => {
    if (WidgetById[id]) {
      throw new Error("More than one widget for [" + id + "]")
    }
    WidgetById[id] = Widget
  })
}

export function render(widget, block, data) {
  const id = widget.type
  const Widget = WidgetById[id]
  if (!Widget) {
    throw new Error("No widget for [" + id + "]")
  }
  return <Widget widget={widget} block={block} data={data}/>
}
