import {forEach} from "app/_shared/utils"

const loaderById = {}

export function register(loaders) {
  forEach(loaders, (loader, id) => {
    if (loaderById[id]) {
      throw new Error("More than one loader for [" + id + "]")
    }
    loaderById[id] = loader
  })
}

export function load(loader, block) {
  const id = loader.type
  if (!loaderById[id]) {
    throw new Error("No loader for [" + id + "]")
  }
  return loaderById[id](loader, block)
}
