const loaderById = {}

export function register(id, loader) {
  if (loaderById[id]) {
    throw new Error("More than one loader for [" + id + "]")
  }
  loaderById[id] = loader
}

export function load(block) {
  const id = block.loader.type
  const loader = loaderById[id]
  if (!loader) {
    throw new Error("No loader for [" + id + "]")
  }
  return loader(block.loader)
}
