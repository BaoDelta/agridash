import _ from "lodash"
import React from "react"

const WidgetById = {}

export function register(widgets) {
  _.each(widgets, (Widget, id) => {
    if (WidgetById[id]) {
      throw new Error("More than one widget for [" + id + "]")
    }
    WidgetById[id] = Widget
  })
}

export function render(block, data) {
  const id = block.widget.type
  const Widget = WidgetById[id]
  if (!Widget) {
    throw new Error("No widget for [" + id + "]")
  }
  return <Widget config={block.widget} data={data}/>
}
