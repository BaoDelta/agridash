import React from "react"
import {forEach} from "app/utils"

const WidgetById = {}

export function register(widgets) {
  forEach(widgets, (Widget, id) => {
    if (WidgetById[id]) {
      throw new Error("More than one widget for [" + id + "]")
    }
    WidgetById[id] = Widget
  })
}

export function render(block, data) {
  const id = block.widget.type
  const Widget = WidgetById[id]
  if (!Widget) {
    throw new Error("No widget for [" + id + "]")
  }
  return <Widget block={block} config={block.widget} data={data}/>
}
