import sql from "app/core/utils/sql"

export function createResult(sessionId, resultId, data) {
  const selectValues = sql.select(sql.raw(`${sessionId}, ${resultId}, '${JSON.stringify(data)}'`))
    .whereNotExists(sql.select(1).from("georesult").where({
      sessionid: sessionId,
      resultid: resultId
    }))
  return sql.insert(sql.raw(`(sessionid, resultid, data) ${selectValues.toString()}`)).into("georesult")
}
