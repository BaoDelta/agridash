import sql from "app/core/utils/sql"

export function findByUsername(username, requireHash) {
  return sql.first().from("appuser").where("username", username).then(user => {
    user = {
      ...user,
      id: +user.id
    }
    if (requireHash) {
      return user
    }
    const {hash, ...userWithoutHash} = user
    return userWithoutHash
  })
}
