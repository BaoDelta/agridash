import request from "superagent"

function createPromise(req) {
  return new Promise((resolve, reject) => {
    req.end((error, response) => {
      if (error) {
        reject((response && response.body) || error)
        return
      }
      resolve(response && response.body)
    })
  })
}

export function get(url, query) {
  return createPromise(request.get(url).query(query))
}

export function post(url, query, data) {
  return createPromise(request.post(url).query(query).send(data))
}
