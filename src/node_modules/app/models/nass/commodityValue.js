import _ from "lodash"
import sql from "app/utils/sql"

export function findByParams(params, year) {
  _.defaults(params, {
    domainid: 341,
    countryid: 1, agglevelid: 7,
    frequencyid: 1, referenceperioddesc: "YEAR"
  })
  const q = sql.select("stateid", "year", "value").from("nasscommodityvalue").where(params)
  if (_.isArray(year)) {
    q.andWhere("year", ">=", year[0]).andWhere("year", "<=", year[1])
  }
  return q
}
