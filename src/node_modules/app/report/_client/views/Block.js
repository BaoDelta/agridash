import React from "react"
import {get} from "app/utils/ajax"
import {render} from "app/block/widget"

const {Component, PropTypes} = React

class Block extends Component {

  static propTypes = {
    block: PropTypes.any.isRequired
  }

  componentDidMount() {
    const {block} = this.props
    get("/api/block/" + block.id + "/data").then(data => {
      this.setState({
        data
      })
    })
  }

  state = {}

  render() {
    const {data} = this.state
    const {block} = this.props
    return <div>
      {data && render(block, data)}
    </div>
  }

}

export default Block
