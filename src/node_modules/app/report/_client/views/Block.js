import React from "react"
import {get} from "app/utils/ajax"
import {render as renderBlock} from "app/block/widget"

const {Component, PropTypes} = React

class Block extends Component {

  static propTypes = {
    block: PropTypes.any.isRequired
  }

  componentDidMount() {
    const {block} = this.props
    get("/api/block/" + block.id + "/data").then(data => {
      this.setState({
        data
      })
    })
  }

  state = {}

  render() {
    const {data} = this.state
    const {block} = this.props
    return <div className="card m-a">
      <div className="card-header">
        {block.title}
      </div>
      <div className="card-block">
        {data ? renderBlock(block, data) : <p>Loading...</p>}
      </div>
    </div>
  }

}

export default Block
