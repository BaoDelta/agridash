import React from "react"
import {get} from "app/utils/ajax"
import {render as renderBlock} from "app/block/widget"
import LoadingIcon from "app/report/_client/views/LoadingIcon"

const {Component, PropTypes} = React

class Block extends Component {

  static propTypes = {
    block: PropTypes.any.isRequired
  }

  componentDidMount() {
    const {block} = this.props
    get("/api/block/" + block.id + "/data").then(data => {
      this.setState({
        data
      })
    })
  }

  state = {}

  render() {
    const {data} = this.state
    const {block} = this.props
    return <div className="card m-a">
      <div className="card-block">
        <h4 className="card-title m-b-md">{block.title}</h4>
        {data ? renderBlock(block, data) : <LoadingIcon/>}
      </div>
    </div>
  }

}

export default Block
