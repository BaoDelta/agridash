import _ from "lodash"
import {load} from "app/block/loader"
import sampleBlocks from "app/report/_server/handlers/sampleBlocks"

function findBlockById(id) {
  return _.find(sampleBlocks, block => block.id === id)
}

export function getAllBlocks(request, reply) {
  reply(sampleBlocks)
}

export function getBlock(request, reply) {
  const block = findBlockById(+request.params.id)
  reply(block)
}

export function getBlockData(request, reply) {
  const block = findBlockById(+request.params.id)
  load(block.loader).then(reply)
}
