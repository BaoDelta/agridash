import _ from "lodash"
import sql from "app/utils/sql"

export default function loadByState(config) {
  _.defaults(config, {
    showAllSurveyStates: false,
    showOtherStates: false,
    showUSTotal: true
  })
  const q = sql.select("fipscode as code", "name").from("state")
  !config.showAllSurveyStates && q.andWhereNot("fipscode", "00")
  !config.showOtherStates && q.andWhereNot("fipscode", "98")
  !config.showUSTotal && q.andWhereNot("fipscode", "99")
  q.orderBy("code")
  return q
}
