const bubbleLayer = {
  name: "bubble",
  bufferSize: 64,
  render: request => ({
    query: `
      select pos as geom, id % 4 + 1 as level from geo
      where source = '${request.query.s}' order by lat desc, lng desc
    `,
    style: `<Style name="bubble">
      <Rule>
        <Filter>[level] = 1</Filter>
        <MarkersSymbolizer allow-overlap="true" fill="#1d91c0" stroke="#0c2c84" opacity="0.7" width="20" height="20"/>
      </Rule>
      <Rule>
        <Filter>[level] = 2</Filter>
        <MarkersSymbolizer allow-overlap="true" fill="#1d91c0" stroke="#0c2c84" opacity="0.7" width="28" height="28"/>
      </Rule>
      <Rule>
        <Filter>[level] = 3</Filter>
        <MarkersSymbolizer allow-overlap="true" fill="#1d91c0" stroke="#0c2c84" opacity="0.7" width="40" height="40"/>
      </Rule>
      <Rule>
        <Filter>[level] = 4</Filter>
        <MarkersSymbolizer allow-overlap="true" fill="#1d91c0" stroke="#0c2c84" opacity="0.7" width="56" height="56"/>
      </Rule>
    </Style>`
  })
}

export default bubbleLayer
