function createResults(layer, records) {
  records.sort((a, b) => b.value - a.value)
  const ranges = [
    Math.round(records.length * 0.1),
    Math.round(records.length * 0.3),
    Math.round(records.length * 0.6),
    records.length
  ]
  let result = ranges.length + 1
  let nextIndex = 0
  let lastValue
  const resultByCode = {}
  records.forEach(({code, value}, index) => {
    if (index >= nextIndex && value !== lastValue) {
      --result
      nextIndex = ranges[ranges.length - result]
    }
    lastValue = value
    resultByCode[code] = result
  })
  return resultByCode
}

export default createResults
