import {createAction} from "redux-actions"
import {get} from "app/core/utils/ajax"

export const UPDATE_INFO = "UPDATE_INFO"

export const updateInfo = createAction(UPDATE_INFO)

export function logout() {
  return (dispatch, getState) => {
    const {info} = getState()
    const done = () => dispatch(updateInfo({
      user: null
    }))
    return get(`${info.apiUrl}/logout`)
    .then(done, done)
  }
}
