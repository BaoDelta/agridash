import {createAction} from "redux-actions"
import {get} from "app/core/utils/ajax"

export const UPDATE_INFO = "UPDATE_INFO"

export const updateInfo = createAction(UPDATE_INFO)

export function logout() {
  return (dispatch, getState) => {
    const {info} = getState()
    return get(`${info.apiUrl}/logout`)
    .then(() => dispatch(updateInfo({
      user: null
    })))
    .catch(() => dispatch(updateInfo({
      user: null
    })))
  }
}
