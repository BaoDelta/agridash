import {createAction} from "redux-actions"
import {post} from "app/core/utils/ajax"

export const REQUEST_NEW_REPORT = "REQUEST_NEW_REPORT"
export const RECEIVE_NEW_REPORT = "RECEIVE_NEW_REPORT"

export const requestNewReport = createAction(REQUEST_NEW_REPORT)
export const receiveNewReport = createAction(RECEIVE_NEW_REPORT)

export function createReport(report) {
  return (dispatch, getState) => {
    const {info} = getState()
    dispatch(requestNewReport(report))
    return post(`${info.apiUrl}/report`, {}, report).then(newReport => dispatch(receiveNewReport(newReport)))
  }
}
