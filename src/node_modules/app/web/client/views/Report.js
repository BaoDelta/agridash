import React from "react"
import {get} from "app/core/utils/ajax"
import IconLoading from "app/web/client/views/IconLoading"
import Map from "app/web/client/views/Map"

const {Component, PropTypes} = React

class Report extends Component {

  static propTypes = {
    params: PropTypes.object.isRequired
  }

  state = {}

  componentDidMount() {
    const {clientConfig} = window
    const {params} = this.props
    get(`${clientConfig.apiUrl}/report/${params.id}`).then(report => {
      this.setState({
        report
      })
    })
  }

  render() {
    const {report} = this.state
    if (!report) {
      return <IconLoading/>
    }
    return <div>
      <Map/>
    </div>
  }

}

export default Report
