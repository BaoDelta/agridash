import Alpaca from "alpaca"
import React from "react"
import {getFormOptions} from "app/web/forms/common"
import {getSchema as getAuthSchema, getOptions as getAuthOptions} from "app/web/forms/auth"
import {dispatch} from "app/web/store"
import {login} from "app/web/actions/info"

const {Component} = React

class LoginForm extends Component {

  componentDidMount() {
    Alpaca(this.refs.container, {
      schema: getAuthSchema(),
      options: getAuthOptions({
        form: getFormOptions("Log In", this.submit)
      })
    })
  }

  submit = auth => {
    dispatch(login(auth))
  }

  render() {
    return <div ref="container"></div>
  }

}

export default LoginForm
