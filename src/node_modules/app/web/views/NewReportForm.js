import React from "react"
import {connect} from "react-redux"
import createForm from "app/web/forms/form"
import {getSchema as getReportSchema, getOptions as getReportOptions} from "app/web/forms/report"

const {Component} = React

class NewReportForm extends Component {

  componentDidMount() {
    this.removeForm = createForm(this.refs.container, getReportSchema(), getReportOptions(), {
      url: "/report",
      buttonLabel: "Create",
      done: report => {
        console.log(report)
      }
    })
  }

  componentWillUnmount() {
    if (this.removeForm) {
      this.removeForm()
    }
  }

  render() {
    return <div ref="container"></div>
  }

}

export default connect()(NewReportForm)
