import Alpaca from "alpaca"
import React from "react"
import {getFormOptions} from "app/web/forms/common"
import {getSchema as getReportSchema, getOptions as getReportOptions} from "app/web/forms/report"
import {dispatch} from "app/web/store"
import {createReport} from "app/web/actions/report"

const {Component} = React

class NewReportForm extends Component {

  componentDidMount() {
    Alpaca(this.refs.container, {
      schema: getReportSchema(),
      options: getReportOptions({
        form: getFormOptions("Create", this.submit)
      })
    })
  }

  submit = report => {
    dispatch(createReport(report))
  }

  render() {
    return <div ref="container"></div>
  }

}

export default NewReportForm
